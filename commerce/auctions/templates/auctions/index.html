{% extends "auctions/layout.html" %}

{% block body %}
    <h2 class="text-4xl font-bold text-center mb-8">Active Listings</h2>

    <form action="{% url 'displayCategory' %}" method="POST" class="my-3 flex justify-center">
        {% csrf_token %}
        <label for="category" class="mr-4 text-lg">Choose a category:</label>
        <select name="category" id="category" class="p-2 border rounded">
            {% for cat in categories %}
                <option value="{{ cat }}">{{ cat }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="bg-yellow-500 text-white py-2 px-4 ml-4 rounded hover:bg-yellow-700">
            Select
        </button>
    </form>


    <div class="flex flex-wrap justify-center gap-6">
        {% for listing in listings %}
        <article class="relative isolate flex flex-col justify-end overflow-hidden rounded-2xl px-4 pb-4 pt-20 max-w-xs mx-2 my-2">
            <img src="{{ listing.imageUrl }}" alt="{{ listing.title }}" class="absolute inset-0 h-full w-full object-cover rounded-t-2xl">
            <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/40"></div>
            <h3 class="z-10 mt-2 text-lg font-bold text-white">{{ listing.title }}</h3>
            <div class="z-10 gap-y-1 overflow-hidden text-sm leading-6 text-gray-300">{{ listing.description }}</div>
            <div class="z-10 mt-2 text-sm font-bold text-white">Price: <strong>${{ listing.price.bid }}</strong></div>
            <a href="{% url 'listing' listing.id %}" class="z-10 mt-2 text-sm font-semibold text-blue-500 hover:text-blue-700">Details</a>
        </article>
        {% endfor %}
    </div>
{% endblock %}
