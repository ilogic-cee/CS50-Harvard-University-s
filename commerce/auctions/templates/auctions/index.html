{% extends "auctions/layout.html" %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'auctions/static/styles.css' %}">
{% block body %}
    <h2>Active Listings</h2>

    <form action="{% url 'displayCategory' %}" method="POST" class="my-3 flex justify-center">
        {% csrf_token %}
        <label for="category" class="mr-4 text-lg">Choose a category:</label>
        <select name="category" id="category" class="p-2 border rounded">
            {% for cat in categories %}
                <option value="{{ cat }}">{{ cat }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="bg-yellow-500 text-white py-2 px-4 ml-4 rounded hover:bg-yellow-700">
            Select
        </button>
    </form>

    <div class="flex flex-wrap justify-center mx-3">
        {% for listing in listings %}
            <article class="relative isolate flex flex-col justify-end overflow-hidden rounded-2xl px-8 pb-8 pt-40 max-w-sm mx-4 my-4">
                <img src="{{ listing.imageUrl }}" alt="{{ listing.title }}" class="absolute inset-0 h-full w-full object-cover rounded-t-2xl">
                <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/40"></div>
                <h3 class="z-10 mt-3 text-3xl font-bold text-white">{{ listing.title }}</h3>
                <div class="z-10 gap-y-1 overflow-hidden text-sm leading-6 text-gray-300">{{ listing.description }}</div>
                <div class="z-10 mt-2 text-xl font-bold text-white">${{ listing.price.bid }}</div>
                <div class="z-10 mt-2">
                    <a href="{% url 'listing' listing.id %}" class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded-full inline-block">
                        View Details
                    </a>
                </div>
            </article>
        {% endfor %}
    </div>
{% endblock %}
